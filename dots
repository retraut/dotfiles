#!/bin/bash

GIT="${HOME}/.dotfiles"
DOTFILES=$GIT/files
CONF="${HOME}"
FILES=( $(cd $DOTFILES && find . -maxdepth 1 -name '.?*'| cut -c 3-) )

function install {
for i in "${FILES[@]}"; do
    rm -rf ${HOME}/$i
    if ln -s $DOTFILES/$i ${HOME}/$i ; then
      echo Link to ${HOME}/$i created!; else     
        echo 0; fi
done
}

function gitsubmodule {
cd $GIT
git submodule init
git submodule update
}

# Need to do in ansible module for centos and ubuntu ( debian ) servers
function needed_package {
sudo apt-get install python-pip zsh vim curl wget  
}


function update {
git -C $GIT add .
git -C $GIT commit
git -C $GIT push
}


if [ $1 == update ] ||[ $1 == "-u" ]; then
    update
    exit 0
elif [ $1 == install ] || [ $1 == "-i" ]; then
    install
    gitsubmodule
    needed_package
fi
